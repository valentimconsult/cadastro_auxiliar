# Configuracao de autenticacao PostgreSQL para acesso externo
# Arquivo: pg_hba.conf
# Otimizado para Cloudflare Tunnel e acesso externo

# TYPE  DATABASE        USER            ADDRESS                 METHOD

# Configuracao local (conexoes via socket Unix)
local   all             all                                     trust

# Configuracao IPv4 localhost
host    all             all             127.0.0.1/32            md5
host    all             all             0.0.0.0/32              md5

# Configuracao IPv6 localhost
host    all             all             ::1/128                 md5
host    all             all             ::/0                    md5

# Configuracao para Docker (rede interna)
host    all             all             172.16.0.0/12           md5
host    all             all             192.168.0.0/16          md5
host    all             all             10.0.0.0/8              md5

# Configuracao para Cloudflare Tunnel (acesso externo)
# Permite conexoes de qualquer IP via Cloudflare
host    all             all             0.0.0.0/0               md5

# Configuracao especifica para usuario cadastro_user
host    cadastro_db     cadastro_user   0.0.0.0/0               md5
host    cadastro_db     cadastro_user   127.0.0.1/32            md5
host    cadastro_db     cadastro_user   ::1/128                 md5

# Configuracao de replicacao (se necessario)
# host    replication     all             127.0.0.1/32            md5
# host    replication     all             ::1/128                 md5
